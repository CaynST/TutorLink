# ================== Application properties (dev) ==================

# === Datasource (H2 en memoria por defecto; sobreescribible por variables de entorno) ===
spring.datasource.url=${JDBC_URL:jdbc:h2:mem:tutorlink;DB_CLOSE_DELAY=-1;MODE=PostgreSQL}
spring.datasource.driver-class-name=${JDBC_DRIVER:org.h2.Driver}
spring.datasource.username=${JDBC_USER:sa}
spring.datasource.password=${JDBC_PASSWORD:}

spring.jpa.hibernate.ddl-auto=${JPA_DDL_AUTO:update}
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true

# Consola H2 (http://localhost:8080/h2)
spring.h2.console.enabled=true
spring.h2.console.path=/h2

# Para usar Postgres exporta antes de arrancar:
# export JDBC_URL=jdbc:postgresql://localhost:5432/tutorlink
# export JDBC_DRIVER=org.postgresql.Driver
# export JDBC_USER=postgres
# export JDBC_PASSWORD=secret
# export JPA_DDL_AUTO=update

# === Configuración de Ollama ===
tutorlink.ollama.base-url=${TUTORLINK_OLLAMA_BASE_URL:http://localhost:11434}
tutorlink.ollama.model-name=${TUTORLINK_OLLAMA_MODEL:llama3.1}
tutorlink.ollama.timeout=${TUTORLINK_OLLAMA_TIMEOUT:30000}
# Enable/disable calls to Ollama. Set to false for testing without a model.
tutorlink.ollama.enabled=${TUTORLINK_OLLAMA_ENABLED:true}

# === Configuración de correo SMTP (notificaciones) ===
spring.mail.host=${MAIL_HOST:smtp.gmail.com}
spring.mail.port=${MAIL_PORT:587}
spring.mail.username=${MAIL_USERNAME:}
spring.mail.password=${MAIL_PASSWORD:}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.default-encoding=UTF-8
app.mail.from=${MAIL_FROM:${spring.mail.username}}

# Para Gmail: usar contraseña de aplicación (2FA habilitado).

# === Logs SQL / JDBC (ajusta en producción) ===
logging.level.org.springframework.jdbc.core=DEBUG
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.orm.jdbc.bind=TRACE